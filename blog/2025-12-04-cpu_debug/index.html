<!doctype html><html lang=en dir=ltr class=scroll-smooth data-default-appearance=light data-auto-appearance=true><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=theme-color content="rgb(255,255,255)"><title>Linux系统负载定位与分析实战指南 &#183; Yu's Space</title>
<meta name=title content="Linux系统负载定位与分析实战指南 &#183; Yu's Space"><script type=text/javascript src=/js/appearance.min.8a082f81b27f3cb2ee528df0b0bdc39787034cf2cc34d4669fbc9977c929023c.js integrity="sha256-iggvgbJ/PLLuUo3wsL3Dl4cDTPLMNNRmn7yZd8kpAjw="></script><link type=text/css rel=stylesheet href=/css/main.bundle.min.082522985b9d96110f0c3ccb5a94a702d82e62aac41510fb092b696d287ac5aa.css integrity="sha256-CCUimFudlhEPDDzLWpSnAtguYqrEFRD7CStpbSh6xao="><script defer type=text/javascript id=script-bundle src=/js/main.bundle.min.224115d95321e7008c42d7cef4967237dae3442b508de128eb5ba1119c977750.js integrity="sha256-IkEV2VMh5wCMQtfO9JZyN9rjRCtQjeEo61uhEZyXd1A=" data-copy=Copy data-copied=Copied></script><meta name=description content="
      
        前言 #在高性能计算场景（如HFT交易系统、实时数据处理等）中，系统负载的精确定位至关重要。本文通过一个真实的系统负载分析案例，系统性地介绍如何使用Linux性能分析工具链，从表面现象深入到根本原因。
本文涉及的工具链 # htop/top: 实时系统资源概览 vmstat: 系统级性能统计 pidstat: 进程级性能分析 其他辅助工具: /proc文件系统、perf、strace等 第一阶段：初步观察 - htop #工具介绍 #htop是top的增强版本，提供彩色、交互式的系统监控界面。相比top，它更直观地展示：
每个CPU核心的使用率 进程/线程列表 内存和Swap使用情况 Load Average（负载平均值） 关键指标解读 #CPU使用率分布 #CPU 0-15: |||||||||||||||||| 100.0% 解读要点：
每核心独立显示：现代多核系统必须分核心观察
颜色含义（通常）：
绿色：用户态进程（user space） 红色：内核态（kernel/system） 蓝色：低优先级进程（nice） 黄色：IRQ（硬件中断） 品红：Soft IRQ（软中断） 灰色：IO Wait 青色：Steal（虚拟化环境） 异常模式识别：
全核心100%：CPU密集型负载，可能是正常业务或失控进程 某些核心100%，其他空闲：不均衡的线程分配或CPU亲和性设置 高IO Wait（灰色）：存储瓶颈 高Soft IRQ（品红）：网络包处理压力大 Load Average深度解析 #Load average: 13.08, 13.23, 12.62 常见误区：Load Average ≠ CPU使用率
Load Average的真实含义：
处于以下状态的进程/线程数量的时间加权平均值：
R状态（Running/Runnable）：正在运行或等待CPU D状态（Uninterruptible Sleep）：不可中断睡眠（通常等待I/O） 三个数字的含义：
第一个：1分钟平均 第二个：5分钟平均 第三个：15分钟平均 解读规则：
      
    "><link rel=canonical href=https://code-agree.github.io/blog/2025-12-04-cpu_debug/><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta property="og:title" content="Linux系统负载定位与分析实战指南"><meta property="og:description" content="前言 #在高性能计算场景（如HFT交易系统、实时数据处理等）中，系统负载的精确定位至关重要。本文通过一个真实的系统负载分析案例，系统性地介绍如何使用Linux性能分析工具链，从表面现象深入到根本原因。
本文涉及的工具链 # htop/top: 实时系统资源概览 vmstat: 系统级性能统计 pidstat: 进程级性能分析 其他辅助工具: /proc文件系统、perf、strace等 第一阶段：初步观察 - htop #工具介绍 #htop是top的增强版本，提供彩色、交互式的系统监控界面。相比top，它更直观地展示：
每个CPU核心的使用率 进程/线程列表 内存和Swap使用情况 Load Average（负载平均值） 关键指标解读 #CPU使用率分布 #CPU 0-15: |||||||||||||||||| 100.0% 解读要点：
每核心独立显示：现代多核系统必须分核心观察
颜色含义（通常）：
绿色：用户态进程（user space） 红色：内核态（kernel/system） 蓝色：低优先级进程（nice） 黄色：IRQ（硬件中断） 品红：Soft IRQ（软中断） 灰色：IO Wait 青色：Steal（虚拟化环境） 异常模式识别：
全核心100%：CPU密集型负载，可能是正常业务或失控进程 某些核心100%，其他空闲：不均衡的线程分配或CPU亲和性设置 高IO Wait（灰色）：存储瓶颈 高Soft IRQ（品红）：网络包处理压力大 Load Average深度解析 #Load average: 13.08, 13.23, 12.62 常见误区：Load Average ≠ CPU使用率
Load Average的真实含义：
处于以下状态的进程/线程数量的时间加权平均值：
R状态（Running/Runnable）：正在运行或等待CPU D状态（Uninterruptible Sleep）：不可中断睡眠（通常等待I/O） 三个数字的含义：
第一个：1分钟平均 第二个：5分钟平均 第三个：15分钟平均 解读规则："><meta property="og:type" content="article"><meta property="og:url" content="https://code-agree.github.io/blog/2025-12-04-cpu_debug/"><meta property="article:section" content="blog"><meta property="article:published_time" content="2025-12-04T23:27:01+08:00"><meta property="article:modified_time" content="2025-12-04T23:27:01+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Linux系统负载定位与分析实战指南"><meta name=twitter:description content="前言 #在高性能计算场景（如HFT交易系统、实时数据处理等）中，系统负载的精确定位至关重要。本文通过一个真实的系统负载分析案例，系统性地介绍如何使用Linux性能分析工具链，从表面现象深入到根本原因。
本文涉及的工具链 # htop/top: 实时系统资源概览 vmstat: 系统级性能统计 pidstat: 进程级性能分析 其他辅助工具: /proc文件系统、perf、strace等 第一阶段：初步观察 - htop #工具介绍 #htop是top的增强版本，提供彩色、交互式的系统监控界面。相比top，它更直观地展示：
每个CPU核心的使用率 进程/线程列表 内存和Swap使用情况 Load Average（负载平均值） 关键指标解读 #CPU使用率分布 #CPU 0-15: |||||||||||||||||| 100.0% 解读要点：
每核心独立显示：现代多核系统必须分核心观察
颜色含义（通常）：
绿色：用户态进程（user space） 红色：内核态（kernel/system） 蓝色：低优先级进程（nice） 黄色：IRQ（硬件中断） 品红：Soft IRQ（软中断） 灰色：IO Wait 青色：Steal（虚拟化环境） 异常模式识别：
全核心100%：CPU密集型负载，可能是正常业务或失控进程 某些核心100%，其他空闲：不均衡的线程分配或CPU亲和性设置 高IO Wait（灰色）：存储瓶颈 高Soft IRQ（品红）：网络包处理压力大 Load Average深度解析 #Load average: 13.08, 13.23, 12.62 常见误区：Load Average ≠ CPU使用率
Load Average的真实含义：
处于以下状态的进程/线程数量的时间加权平均值：
R状态（Running/Runnable）：正在运行或等待CPU D状态（Uninterruptible Sleep）：不可中断睡眠（通常等待I/O） 三个数字的含义：
第一个：1分钟平均 第二个：5分钟平均 第三个：15分钟平均 解读规则："><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","articleSection":"Blog","name":"Linux系统负载定位与分析实战指南","headline":"Linux系统负载定位与分析实战指南","abstract":"前言 #在高性能计算场景（如HFT交易系统、实时数据处理等）中，系统负载的精确定位至关重要。本文通过一个真实的系统负载分析案例，系统性地介绍如何使用Linux性能分析工具链，从表面现象深入到根本原因。\n本文涉及的工具链 # htop\/top: 实时系统资源概览 vmstat: 系统级性能统计 pidstat: 进程级性能分析 其他辅助工具: \/proc文件系统、perf、strace等 第一阶段：初步观察 - htop #工具介绍 #htop是top的增强版本，提供彩色、交互式的系统监控界面。相比top，它更直观地展示：\n每个CPU核心的使用率 进程\/线程列表 内存和Swap使用情况 Load Average（负载平均值） 关键指标解读 #CPU使用率分布 #CPU 0-15: |||||||||||||||||| 100.0% 解读要点：\n每核心独立显示：现代多核系统必须分核心观察\n颜色含义（通常）：\n绿色：用户态进程（user space） 红色：内核态（kernel\/system） 蓝色：低优先级进程（nice） 黄色：IRQ（硬件中断） 品红：Soft IRQ（软中断） 灰色：IO Wait 青色：Steal（虚拟化环境） 异常模式识别：\n全核心100%：CPU密集型负载，可能是正常业务或失控进程 某些核心100%，其他空闲：不均衡的线程分配或CPU亲和性设置 高IO Wait（灰色）：存储瓶颈 高Soft IRQ（品红）：网络包处理压力大 Load Average深度解析 #Load average: 13.08, 13.23, 12.62 常见误区：Load Average ≠ CPU使用率\nLoad Average的真实含义：\n处于以下状态的进程\/线程数量的时间加权平均值：\nR状态（Running\/Runnable）：正在运行或等待CPU D状态（Uninterruptible Sleep）：不可中断睡眠（通常等待I\/O） 三个数字的含义：\n第一个：1分钟平均 第二个：5分钟平均 第三个：15分钟平均 解读规则：","inLanguage":"en","url":"https:\/\/code-agree.github.io\/blog\/2025-12-04-cpu_debug\/","author":{"@type":"Person","name":"Wenjun Yu"},"copyrightYear":"2025","dateCreated":"2025-12-04T23:27:01\u002b08:00","datePublished":"2025-12-04T23:27:01\u002b08:00","dateModified":"2025-12-04T23:27:01\u002b08:00","mainEntityOfPage":"true","wordCount":"1285"}</script><meta name=author content="Wenjun Yu"><link href=https://github.com/code-agree rel=me><link href=https://x.com/flight_from_ rel=me><link href=mailto:lineyua66@gmail.com rel=me></head><body class="m-auto flex h-screen max-w-7xl flex-col bg-neutral px-6 text-lg leading-7 text-neutral-900 sm:px-14 md:px-24 lg:px-32 dark:bg-neutral-800 dark:text-neutral"><div id=the-top class="absolute flex self-center"><a class="-translate-y-8 rounded-b-lg bg-primary-200 px-3 py-1 text-sm focus:translate-y-0 dark:bg-neutral-600" href=#main-content><span class="pe-2 font-bold text-primary-600 dark:text-primary-400">&darr;</span>Skip to main content</a></div><header class="py-6 font-semibold text-neutral-900 print:hidden sm:py-10 dark:text-neutral"><nav class="flex items-start justify-between sm:items-center"><div class="flex flex-row items-center"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" rel=me href=/>Yu&rsquo;s Space</a></div><ul class="flex list-none flex-col text-end sm:flex-row"><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0.5"><a href=/blog/ title=Blog><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Blog</span></a></li><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0.5"><a href=/projects/ title=Projects><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Projects</span></a></li><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0.5"><a href=/tags/ title=Tags><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Tags</span></a></li><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0.5"><a href=/about/ title="About Me"><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">About</span></a></li><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0.5"><button id=search-button-1 title="Search (/)">
<span class="group-dark:hover:text-primary-400 transition-colors group-hover:text-primary-600"><span class="icon relative inline-block px-1 align-text-bottom"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></span><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2"></span></button></li></ul></nav></header><div class="relative flex grow flex-col"><main id=main-content class=grow><article><header class=max-w-4xl><h1 class="mb-8 mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">Linux系统负载定位与分析实战指南</h1><div class="mb-10 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div class="flex flex-row flex-wrap items-center"><time datetime="2025-12-04 23:27:01 +0800 +0800">4 December 2025</time><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">7 mins</span></div></div></header><section class="prose mt-0 flex max-w-full flex-col dark:prose-invert lg:flex-row"><div class="min-h-0 min-w-0 max-w-4xl grow"><h2 id=前言 class="relative group">前言 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e5%89%8d%e8%a8%80 aria-label=Anchor>#</a></span></h2><p>在高性能计算场景（如HFT交易系统、实时数据处理等）中，系统负载的精确定位至关重要。本文通过一个真实的系统负载分析案例，系统性地介绍如何使用Linux性能分析工具链，从表面现象深入到根本原因。</p><h3 id=本文涉及的工具链 class="relative group">本文涉及的工具链 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e6%9c%ac%e6%96%87%e6%b6%89%e5%8f%8a%e7%9a%84%e5%b7%a5%e5%85%b7%e9%93%be aria-label=Anchor>#</a></span></h3><ul><li><strong>htop/top</strong>: 实时系统资源概览</li><li><strong>vmstat</strong>: 系统级性能统计</li><li><strong>pidstat</strong>: 进程级性能分析</li><li><strong>其他辅助工具</strong>: <code>/proc</code>文件系统、perf、strace等</li></ul><hr><h2 id=第一阶段初步观察---htop class="relative group">第一阶段：初步观察 - htop <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e7%ac%ac%e4%b8%80%e9%98%b6%e6%ae%b5%e5%88%9d%e6%ad%a5%e8%a7%82%e5%af%9f---htop aria-label=Anchor>#</a></span></h2><h3 id=工具介绍 class="relative group">工具介绍 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e5%b7%a5%e5%85%b7%e4%bb%8b%e7%bb%8d aria-label=Anchor>#</a></span></h3><p><code>htop</code>是<code>top</code>的增强版本，提供彩色、交互式的系统监控界面。相比<code>top</code>，它更直观地展示：</p><ul><li>每个CPU核心的使用率</li><li>进程/线程列表</li><li>内存和Swap使用情况</li><li>Load Average（负载平均值）</li></ul><h3 id=关键指标解读 class="relative group">关键指标解读 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e5%85%b3%e9%94%ae%e6%8c%87%e6%a0%87%e8%a7%a3%e8%af%bb aria-label=Anchor>#</a></span></h3><h4 id=cpu使用率分布 class="relative group">CPU使用率分布 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#cpu%e4%bd%bf%e7%94%a8%e7%8e%87%e5%88%86%e5%b8%83 aria-label=Anchor>#</a></span></h4><pre tabindex=0><code>CPU 0-15: |||||||||||||||||| 100.0%
</code></pre><p><strong>解读要点：</strong></p><ol><li><p><strong>每核心独立显示</strong>：现代多核系统必须分核心观察</p></li><li><p><strong>颜色含义</strong>（通常）：</p><ul><li>绿色：用户态进程（user space）</li><li>红色：内核态（kernel/system）</li><li>蓝色：低优先级进程（nice）</li><li>黄色：IRQ（硬件中断）</li><li>品红：Soft IRQ（软中断）</li><li>灰色：IO Wait</li><li>青色：Steal（虚拟化环境）</li></ul></li><li><p><strong>异常模式识别</strong>：</p><ul><li><strong>全核心100%</strong>：CPU密集型负载，可能是正常业务或失控进程</li><li><strong>某些核心100%，其他空闲</strong>：不均衡的线程分配或CPU亲和性设置</li><li><strong>高IO Wait（灰色）</strong>：存储瓶颈</li><li><strong>高Soft IRQ（品红）</strong>：网络包处理压力大</li></ul></li></ol><h4 id=load-average深度解析 class="relative group">Load Average深度解析 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#load-average%e6%b7%b1%e5%ba%a6%e8%a7%a3%e6%9e%90 aria-label=Anchor>#</a></span></h4><pre tabindex=0><code>Load average: 13.08, 13.23, 12.62
</code></pre><p><strong>常见误区：Load Average ≠ CPU使用率</strong></p><p><strong>Load Average的真实含义：</strong></p><p>处于以下状态的进程/线程数量的时间加权平均值：</p><ul><li><strong>R状态（Running/Runnable）</strong>：正在运行或等待CPU</li><li><strong>D状态（Uninterruptible Sleep）</strong>：不可中断睡眠（通常等待I/O）</li></ul><p><strong>三个数字的含义：</strong></p><ul><li>第一个：1分钟平均</li><li>第二个：5分钟平均</li><li>第三个：15分钟平均</li></ul><p><strong>解读规则：</strong></p><p>对于N核CPU：</p><ul><li><code>Load &lt; N × 0.7</code>：健康状态，有充足余量</li><li><code>Load ≈ N</code>：满载运行，无余量应对突发</li><li><code>Load > N</code>：存在队列等待或I/O阻塞</li></ul><p><strong>趋势分析：</strong></p><pre tabindex=0><code>13.08, 13.23, 12.62  ← 三个值接近
</code></pre><p>说明负载稳定持续，不是短暂峰值。</p><p><strong>关键判断：16核系统，Load 13</strong></p><ul><li>不能直接判断是否有队列等待</li><li>需要结合<code>vmstat</code>的<code>r</code>列确认</li></ul><h4 id=内存使用 class="relative group">内存使用 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e5%86%85%e5%ad%98%e4%bd%bf%e7%94%a8 aria-label=Anchor>#</a></span></h4><pre tabindex=0><code>Mem: 14.2G/30.1G
Swp: 0K/0K
</code></pre><p><strong>健康指标：</strong></p><ul><li>Swap为0：无内存交换（对低延迟系统至关重要）</li><li>使用率47%：内存充足</li></ul><h3 id=htop的局限性 class="relative group">htop的局限性 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#htop%e7%9a%84%e5%b1%80%e9%99%90%e6%80%a7 aria-label=Anchor>#</a></span></h3><p>htop提供了良好的<strong>概览</strong>，但无法回答：</p><ul><li>哪些进程导致上下文切换？</li><li>CPU调度延迟有多大？</li><li>是CPU密集还是I/O密集？</li><li>具体的系统调用分布？</li></ul><p>需要更深入的工具进行分析。</p><hr><h2 id=第二阶段系统级分析---vmstat class="relative group">第二阶段：系统级分析 - vmstat <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e7%ac%ac%e4%ba%8c%e9%98%b6%e6%ae%b5%e7%b3%bb%e7%bb%9f%e7%ba%a7%e5%88%86%e6%9e%90---vmstat aria-label=Anchor>#</a></span></h2><h3 id=工具介绍-1 class="relative group">工具介绍 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e5%b7%a5%e5%85%b7%e4%bb%8b%e7%bb%8d-1 aria-label=Anchor>#</a></span></h3><p><code>vmstat</code>（Virtual Memory Statistics）提供系统级的性能快照，是最基础也是最重要的性能分析工具。</p><p><strong>命令：</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>vmstat <span class=m>1</span>  <span class=c1># 每秒采样一次</span>
</span></span></code></pre></div><h3 id=输出解析 class="relative group">输出解析 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e8%be%93%e5%87%ba%e8%a7%a3%e6%9e%90 aria-label=Anchor>#</a></span></h3><pre tabindex=0><code>procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu-----
 r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st
13  0      0 14125928 344660 14437632    0    0     1    15 17853 4750 79  3 18  0  0
14  0      0 14126704 344660 14437728    0    0     0     0 17847 4495 80  3 18  0  0
13  0      0 14128860 344660 14437744    0    0     0    72 17575 4030 79  3 19  0  0
</code></pre><h3 id=关键列详解 class="relative group">关键列详解 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e5%85%b3%e9%94%ae%e5%88%97%e8%af%a6%e8%a7%a3 aria-label=Anchor>#</a></span></h3><h4 id=procs进程状态 class="relative group">procs（进程状态） <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#procs%e8%bf%9b%e7%a8%8b%e7%8a%b6%e6%80%81 aria-label=Anchor>#</a></span></h4><table><thead><tr><th>列</th><th>含义</th><th>正常范围</th><th>异常信号</th></tr></thead><tbody><tr><td><strong>r</strong></td><td>运行队列长度：等待CPU或正在运行的进程数</td><td>&lt; CPU核心数</td><td>> CPU核心数表示队列积压</td></tr><tr><td><strong>b</strong></td><td>阻塞进程数：等待I/O的进程（D状态）</td><td>0-2</td><td>>5表示I/O瓶颈</td></tr></tbody></table><p><strong>本例分析：</strong></p><pre tabindex=0><code>r = 13-14，CPU核心数 = 16
结论：无队列等待，所有可运行进程都已调度到CPU
</code></pre><p><strong>关键区分：</strong></p><ul><li><code>r = 13, Load = 13</code> → 正常，无等待</li><li><code>r = 25, Load = 25</code> → CPU过载，有12个进程在排队（假设16核）</li></ul><h4 id=memory内存 class="relative group">memory（内存） <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#memory%e5%86%85%e5%ad%98 aria-label=Anchor>#</a></span></h4><table><thead><tr><th>列</th><th>含义</th><th>单位</th></tr></thead><tbody><tr><td>swpd</td><td>使用的swap空间</td><td>KB</td></tr><tr><td>free</td><td>空闲物理内存</td><td>KB</td></tr><tr><td>buff</td><td>用于块设备的缓冲</td><td>KB</td></tr><tr><td>cache</td><td>用于文件系统的缓存</td><td>KB</td></tr></tbody></table><p><strong>本例分析：</strong></p><ul><li>free稳定在14GB左右</li><li>swpd = 0（极好，无swap）</li><li>内存无压力</li></ul><h4 id=swap交换活动 class="relative group">swap（交换活动） <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#swap%e4%ba%a4%e6%8d%a2%e6%b4%bb%e5%8a%a8 aria-label=Anchor>#</a></span></h4><table><thead><tr><th>列</th><th>含义</th><th>告警阈值</th></tr></thead><tbody><tr><td>si</td><td>从swap换入的内存</td><td>>0即需关注</td></tr><tr><td>so</td><td>换出到swap的内存</td><td>>0即需关注</td></tr></tbody></table><p><strong>si/so持续>0是严重问题：</strong></p><ul><li>表明内存不足，发生页面交换</li><li>性能会下降100-1000倍</li><li>对HFT系统是致命的</li></ul><h4 id=io块设备io class="relative group">io（块设备I/O） <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#io%e5%9d%97%e8%ae%be%e5%a4%87io aria-label=Anchor>#</a></span></h4><table><thead><tr><th>列</th><th>含义</th><th>单位</th></tr></thead><tbody><tr><td>bi</td><td>从块设备读入</td><td>blocks/s</td></tr><tr><td>bo</td><td>写入块设备</td><td>blocks/s</td></tr></tbody></table><p><strong>本例分析：</strong></p><pre tabindex=0><code>bi: 0-1 blocks/s   ← 几乎无读
bo: 0-548 blocks/s ← 偶尔有写（可能是日志）
</code></pre><p>I/O不是瓶颈。</p><h4 id=system系统活动 class="relative group">system（系统活动） <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#system%e7%b3%bb%e7%bb%9f%e6%b4%bb%e5%8a%a8 aria-label=Anchor>#</a></span></h4><table><thead><tr><th>列</th><th>含义</th><th>正常范围</th><th>说明</th></tr></thead><tbody><tr><td><strong>in</strong></td><td>中断次数/秒</td><td>1000-20000</td><td>网卡、磁盘、定时器中断</td></tr><tr><td><strong>cs</strong></td><td>上下文切换次数/秒</td><td>1000-10000</td><td>进程/线程切换频率</td></tr></tbody></table><p><strong>本例分析：</strong></p><pre tabindex=0><code>in: 17000-19000次/秒  ← 适中
cs: 4000-9000次/秒    ← 有波动，需进一步分析
</code></pre><p><strong>上下文切换波动的常见原因：</strong></p><ul><li>锁竞争</li><li>定时器集中到期</li><li>网络包突发</li><li>后台任务周期性唤醒</li></ul><h4 id=cpucpu时间分配 class="relative group">cpu（CPU时间分配） <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#cpucpu%e6%97%b6%e9%97%b4%e5%88%86%e9%85%8d aria-label=Anchor>#</a></span></h4><table><thead><tr><th>列</th><th>含义</th><th>健康值</th></tr></thead><tbody><tr><td><strong>us</strong></td><td>用户态CPU时间</td><td>业务相关</td></tr><tr><td><strong>sy</strong></td><td>系统态CPU时间</td><td>&lt;10%</td></tr><tr><td><strong>id</strong></td><td>空闲CPU</td><td>>20%（对于关键系统）</td></tr><tr><td><strong>wa</strong></td><td>等待I/O的CPU时间</td><td>&lt;5%</td></tr><tr><td><strong>st</strong></td><td>被虚拟化偷走的时间</td><td>&lt;2%</td></tr></tbody></table><p><strong>本例分析：</strong></p><pre tabindex=0><code>us: 79-80%  ← 用户态占主导（业务代码）
sy: 3-5%    ← 系统调用开销适中
id: 15-19%  ← 有空闲，但余量不足
wa: 0%      ← 无I/O等待
st: 0%      ← 非虚拟化或无资源竞争
</code></pre><p><strong>评估：</strong></p><ul><li>CPU主要用于业务逻辑（us高）</li><li>系统开销合理（sy低）</li><li><strong>但只有17%余量，无法应对突发</strong></li></ul><h3 id=vmstat的判断逻辑 class="relative group">vmstat的判断逻辑 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#vmstat%e7%9a%84%e5%88%a4%e6%96%ad%e9%80%bb%e8%be%91 aria-label=Anchor>#</a></span></h3><h4 id=场景1cpu密集型 class="relative group">场景1：CPU密集型 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e5%9c%ba%e6%99%af1cpu%e5%af%86%e9%9b%86%e5%9e%8b aria-label=Anchor>#</a></span></h4><pre tabindex=0><code> r  b   us sy id wa
25  0   95  3  2  0
</code></pre><ul><li>r > 核心数：队列积压</li><li>us高：应用消耗CPU</li><li>id低：无空闲</li><li><strong>瓶颈：CPU不足</strong></li></ul><h4 id=场景2io密集型 class="relative group">场景2：I/O密集型 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e5%9c%ba%e6%99%af2io%e5%af%86%e9%9b%86%e5%9e%8b aria-label=Anchor>#</a></span></h4><pre tabindex=0><code> r  b   us sy id wa    bi    bo
 2 15    5  2 10 83  5000  8000
</code></pre><ul><li>b高：大量进程等待I/O</li><li>wa高：CPU在等待磁盘</li><li>bi/bo高：大量磁盘操作</li><li><strong>瓶颈：存储I/O</strong></li></ul><h4 id=场景3内存压力 class="relative group">场景3：内存压力 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e5%9c%ba%e6%99%af3%e5%86%85%e5%ad%98%e5%8e%8b%e5%8a%9b aria-label=Anchor>#</a></span></h4><pre tabindex=0><code> r  b  swpd    si   so   id
 5  2  5000   200  150   70
</code></pre><ul><li>si/so >0：正在换页</li><li>swpd增长：swap使用增加</li><li><strong>瓶颈：内存不足</strong></li></ul><h4 id=场景4本例情况 class="relative group">场景4：本例情况 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e5%9c%ba%e6%99%af4%e6%9c%ac%e4%be%8b%e6%83%85%e5%86%b5 aria-label=Anchor>#</a></span></h4><pre tabindex=0><code> r  b   us sy id wa
13  0   80  3 17  0
</code></pre><ul><li>r &lt; 核心数：无队列</li><li>us高，sy低：应用高效运行</li><li>id适中：有余量但不多</li><li><strong>状态：接近满载，需优化</strong></li></ul><hr><h2 id=第三阶段进程级分析---pidstat class="relative group">第三阶段：进程级分析 - pidstat <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e7%ac%ac%e4%b8%89%e9%98%b6%e6%ae%b5%e8%bf%9b%e7%a8%8b%e7%ba%a7%e5%88%86%e6%9e%90---pidstat aria-label=Anchor>#</a></span></h2><h3 id=工具介绍-2 class="relative group">工具介绍 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e5%b7%a5%e5%85%b7%e4%bb%8b%e7%bb%8d-2 aria-label=Anchor>#</a></span></h3><p><code>pidstat</code>提供进程/线程级别的详细统计，是定位具体"罪魁祸首"的关键工具。</p><p><strong>命令：</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>pidstat -w <span class=m>1</span> <span class=m>10</span>  <span class=c1># -w显示上下文切换，每秒采样，共10次</span>
</span></span></code></pre></div><h3 id=输出解析-1 class="relative group">输出解析 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e8%be%93%e5%87%ba%e8%a7%a3%e6%9e%90-1 aria-label=Anchor>#</a></span></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>22:29:17      UID       PID   cswch/s nvcswch/s  Command
</span></span><span class=line><span class=cl>22:29:17        <span class=m>0</span>        <span class=m>14</span>     68.00      0.00  rcu_sched
</span></span><span class=line><span class=cl>22:29:17     <span class=m>1000</span>   <span class=m>1042579</span>     44.00      0.00  node
</span></span><span class=line><span class=cl>22:29:17        <span class=m>0</span>      <span class=m>3578</span>     32.00      0.00  AliYunDunMonito
</span></span></code></pre></div><h3 id=核心指标 class="relative group">核心指标 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e6%a0%b8%e5%bf%83%e6%8c%87%e6%a0%87 aria-label=Anchor>#</a></span></h3><table><thead><tr><th>指标</th><th>全称</th><th>含义</th><th>解读</th></tr></thead><tbody><tr><td><strong>cswch/s</strong></td><td>voluntary context switches</td><td>自愿上下文切换</td><td>进程主动让出CPU（等待I/O、锁、sleep）</td></tr><tr><td><strong>nvcswch/s</strong></td><td>non-voluntary context switches</td><td>非自愿上下文切换</td><td>进程被强制切换（时间片耗尽、被抢占）</td></tr></tbody></table><h3 id=判断进程行为模式 class="relative group">判断进程行为模式 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e5%88%a4%e6%96%ad%e8%bf%9b%e7%a8%8b%e8%a1%8c%e4%b8%ba%e6%a8%a1%e5%bc%8f aria-label=Anchor>#</a></span></h3><h4 id=模式1io密集型 class="relative group">模式1：I/O密集型 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e6%a8%a1%e5%bc%8f1io%e5%af%86%e9%9b%86%e5%9e%8b aria-label=Anchor>#</a></span></h4><pre tabindex=0><code>PID    cswch/s  nvcswch/s  Command
1234   500      1          database
</code></pre><ul><li><strong>高cswch，低nvcswch</strong></li><li>进程频繁等待I/O完成</li><li>自愿让出CPU</li><li><strong>不是CPU竞争问题</strong></li></ul><h4 id=模式2cpu密集型 class="relative group">模式2：CPU密集型 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e6%a8%a1%e5%bc%8f2cpu%e5%af%86%e9%9b%86%e5%9e%8b aria-label=Anchor>#</a></span></h4><pre tabindex=0><code>PID    cswch/s  nvcswch/s  Command
5678   50       200        compute
</code></pre><ul><li><strong>低cswch，高nvcswch</strong></li><li>进程一直想运行</li><li>时间片用完被强制切换</li><li><strong>可能存在CPU竞争</strong></li></ul><h4 id=模式3锁竞争 class="relative group">模式3：锁竞争 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e6%a8%a1%e5%bc%8f3%e9%94%81%e7%ab%9e%e4%ba%89 aria-label=Anchor>#</a></span></h4><pre tabindex=0><code>PID    cswch/s  nvcswch/s  Command
9012   2000     5          app
</code></pre><ul><li><strong>极高cswch，低nvcswch</strong></li><li>频繁尝试获取锁</li><li>获取失败则睡眠</li><li><strong>存在锁竞争问题</strong></li></ul><h3 id=本例深度分析 class="relative group">本例深度分析 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e6%9c%ac%e4%be%8b%e6%b7%b1%e5%ba%a6%e5%88%86%e6%9e%90 aria-label=Anchor>#</a></span></h3><h4 id=内核工作队列异常 class="relative group">内核工作队列异常 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e5%86%85%e6%a0%b8%e5%b7%a5%e4%bd%9c%e9%98%9f%e5%88%97%e5%bc%82%e5%b8%b8 aria-label=Anchor>#</a></span></h4><pre tabindex=0><code>Average:     PID   cswch/s nvcswch/s  Command
Average:  1114392     85.3      0.00  kworker/u32:1
Average:  1138163     56.3      0.00  kworker/u32:3
Average:  1076671     70.7      0.00  kworker/u32:2
                      ----
                     212.3 次/秒 总计
</code></pre><p><strong>峰值更惊人：</strong></p><pre tabindex=0><code>22:29:20  1114392    290.0      0.00  kworker/u32:1
22:29:19  1138163    228.0      0.00  kworker/u32:3
22:29:24  1076671    206.0      0.00  kworker/u32:2
</code></pre><p><strong>kworker解读：</strong></p><ul><li><code>kworker</code>: 内核工作队列线程</li><li><code>u32</code>: unbound workqueue（不绑定CPU）</li><li>处理：异步I/O完成、网络包、定时器、中断下半部</li></ul><p><strong>异常原因可能：</strong></p><ol><li>大量网络流量</li><li>高频定时器</li><li>驱动问题</li><li>监控Agent频繁系统调用</li></ol><h4 id=rcu调度器 class="relative group">RCU调度器 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#rcu%e8%b0%83%e5%ba%a6%e5%99%a8 aria-label=Anchor>#</a></span></h4><pre tabindex=0><code>Average:        14     96.0      0.00  rcu_sched
峰值:           14    126.0      0.00  rcu_sched
</code></pre><p><strong>RCU（Read-Copy Update）：</strong></p><ul><li>Linux内核同步机制</li><li>高频率说明大量内核数据结构访问</li><li>可能原因：大量进程创建销毁、内存管理</li></ul><h4 id=业务应用nodejs class="relative group">业务应用（Node.js） <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e4%b8%9a%e5%8a%a1%e5%ba%94%e7%94%a8nodejs aria-label=Anchor>#</a></span></h4><pre tabindex=0><code>Average:   1042579     35.7      0.00  node  ← 主进程
Average:   1042672     23.3      0.00  node
Average:   1078649     13.5      0.00  node
</code></pre><p><strong>关键观察：nvcswch/s = 0！</strong></p><p><strong>这说明：</strong></p><ul><li>✅ 应用没有CPU争抢</li><li>✅ 切换都是主动的（等待I/O、异步操作）</li><li>✅ 这是Node.js异步应用的正常行为</li><li>✅ <strong>应用本身设计合理</strong></li></ul><h4 id=监控agent class="relative group">监控Agent <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e7%9b%91%e6%8e%a7agent aria-label=Anchor>#</a></span></h4><pre tabindex=0><code>Average:      3578     30.4      0.00  AliYunDunMonito
Average:      1913     11.2      0.00  AliYunDun
Average:       870     25.0      0.00  tuned
</code></pre><p><strong>累计影响：</strong></p><ul><li>30.4 + 11.2 + 25 = 66.6 次/秒</li><li>持续消耗系统资源</li><li>对延迟敏感系统是负担</li></ul><h4 id=vscodecursor意外发现 class="relative group">VSCode/Cursor（意外发现） <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#vscodecursor%e6%84%8f%e5%a4%96%e5%8f%91%e7%8e%b0 aria-label=Anchor>#</a></span></h4><pre tabindex=0><code>Average:   1042536     14.3      0.00  cursor-8e4da76a
Average:   1042579     35.7      0.00  node  ← VSCode插件
Average:   1042672     23.3      0.00  node  ← 语言服务器
</code></pre><p><strong>生产环境的严重问题：</strong></p><ul><li>IDE不应在生产服务器运行</li><li>消耗CPU、内存、I/O</li><li>增加不确定性</li></ul><h3 id=从pidstat导出的结论 class="relative group">从pidstat导出的结论 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e4%bb%8epidstat%e5%af%bc%e5%87%ba%e7%9a%84%e7%bb%93%e8%ae%ba aria-label=Anchor>#</a></span></h3><p><strong>排查结果：</strong></p><table><thead><tr><th>类别</th><th>贡献</th><th>评估</th><th>优先级</th></tr></thead><tbody><tr><td>内核工作队列</td><td>~210 次/秒</td><td>异常高，需深入调查</td><td>P1</td></tr><tr><td>RCU</td><td>~96 次/秒</td><td>偏高，系统压力大</td><td>P2</td></tr><tr><td>Node.js应用</td><td>~100 次/秒</td><td>正常，行为健康</td><td>✓</td></tr><tr><td>监控Agent</td><td>~67 次/秒</td><td>可优化</td><td>P2</td></tr><tr><td>VSCode</td><td>~70 次/秒</td><td>不应存在</td><td>P0</td></tr></tbody></table><hr><h2 id=第四阶段深入调查 class="relative group">第四阶段：深入调查 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e7%ac%ac%e5%9b%9b%e9%98%b6%e6%ae%b5%e6%b7%b1%e5%85%a5%e8%b0%83%e6%9f%a5 aria-label=Anchor>#</a></span></h2><h3 id=针对内核工作队列 class="relative group">针对内核工作队列 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e9%92%88%e5%af%b9%e5%86%85%e6%a0%b8%e5%b7%a5%e4%bd%9c%e9%98%9f%e5%88%97 aria-label=Anchor>#</a></span></h3><p>当<code>kworker</code>异常活跃时，需要找出根本原因：</p><h4 id=1-检查中断分布 class="relative group">1. 检查中断分布 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#1-%e6%a3%80%e6%9f%a5%e4%b8%ad%e6%96%ad%e5%88%86%e5%b8%83 aria-label=Anchor>#</a></span></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 查看中断统计</span>
</span></span><span class=line><span class=cl>cat /proc/interrupts
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 示例输出：</span>
</span></span><span class=line><span class=cl>           CPU0   CPU1   CPU2   ...   CPU15
</span></span><span class=line><span class=cl>  0:        <span class=m>142</span>      <span class=m>0</span>      <span class=m>0</span>   ...       <span class=m>0</span>   IO-APIC   2-edge      timer
</span></span><span class=line><span class=cl>  1:          <span class=m>9</span>      <span class=m>0</span>      <span class=m>0</span>   ...       <span class=m>0</span>   IO-APIC   1-edge      i8042
</span></span><span class=line><span class=cl> 24:          <span class=m>0</span>      <span class=m>0</span>      <span class=m>0</span>   ...       <span class=m>0</span>   PCI-MSI 327680-edge   xhci_hcd
</span></span><span class=line><span class=cl> 25:    <span class=m>5482943</span> <span class=m>5123456</span> <span class=m>4986532</span> ...  <span class=m>5234123</span>   PCI-MSI 327681-edge   eth0  ← 网卡中断
</span></span></code></pre></div><p><strong>分析要点：</strong></p><ul><li>找出中断频率最高的设备</li><li>检查中断是否均匀分布在各CPU</li><li>网卡中断通常是主要来源</li></ul><h4 id=2-检查软中断 class="relative group">2. 检查软中断 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#2-%e6%a3%80%e6%9f%a5%e8%bd%af%e4%b8%ad%e6%96%ad aria-label=Anchor>#</a></span></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat /proc/softirqs
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 示例输出：</span>
</span></span><span class=line><span class=cl>                CPU0       CPU1       CPU2    ...   CPU15
</span></span><span class=line><span class=cl>      HI:          <span class=m>5</span>          <span class=m>0</span>          <span class=m>0</span>    ...       <span class=m>0</span>
</span></span><span class=line><span class=cl>   TIMER:    <span class=m>1234567</span>    <span class=m>1245678</span>    <span class=m>1256789</span>   ...  <span class=m>1267890</span>  ← 定时器
</span></span><span class=line><span class=cl>  NET_TX:      <span class=m>45678</span>      <span class=m>46789</span>      <span class=m>47890</span>   ...    <span class=m>48901</span>  ← 网络发送
</span></span><span class=line><span class=cl>  NET_RX:    <span class=m>2345678</span>    <span class=m>2456789</span>    <span class=m>2567890</span>   ...  <span class=m>2678901</span>  ← 网络接收
</span></span><span class=line><span class=cl>   BLOCK:       <span class=m>1234</span>       <span class=m>1245</span>       <span class=m>1256</span>   ...     <span class=m>1267</span>
</span></span></code></pre></div><p><strong>重点关注：</strong></p><ul><li><strong>NET_RX/NET_TX</strong>：网络软中断（常见的kworker触发源）</li><li><strong>TIMER</strong>：定时器中断</li><li><strong>BLOCK</strong>：块设备I/O完成</li></ul><h4 id=3-网络统计 class="relative group">3. 网络统计 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#3-%e7%bd%91%e7%bb%9c%e7%bb%9f%e8%ae%a1 aria-label=Anchor>#</a></span></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 网络连接统计</span>
</span></span><span class=line><span class=cl>ss -s
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 输出示例：</span>
</span></span><span class=line><span class=cl>Total: <span class=m>156</span>
</span></span><span class=line><span class=cl>TCP:   <span class=m>120</span> <span class=o>(</span>estab 85, closed 25, orphaned 0, timewait 20<span class=o>)</span>
</span></span><span class=line><span class=cl>...
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 检查短连接</span>
</span></span><span class=line><span class=cl>ss -tan <span class=p>|</span> awk <span class=s1>&#39;{print $1}&#39;</span> <span class=p>|</span> sort <span class=p>|</span> uniq -c
</span></span><span class=line><span class=cl>     <span class=m>85</span> ESTAB
</span></span><span class=line><span class=cl>     <span class=m>20</span> TIME-WAIT  ← 大量TIME-WAIT可能表示短连接问题
</span></span><span class=line><span class=cl>      <span class=m>5</span> LISTEN
</span></span></code></pre></div><p><strong>高频短连接的影响：</strong></p><ul><li>大量socket创建/销毁</li><li>触发内核工作队列处理</li><li>增加上下文切换</li></ul><h4 id=4-使用perf深入分析 class="relative group">4. 使用perf深入分析 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#4-%e4%bd%bf%e7%94%a8perf%e6%b7%b1%e5%85%a5%e5%88%86%e6%9e%90 aria-label=Anchor>#</a></span></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 记录系统调用</span>
</span></span><span class=line><span class=cl>perf record -e <span class=s1>&#39;syscalls:*&#39;</span> -a -g -- sleep <span class=m>10</span>
</span></span><span class=line><span class=cl>perf report
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 记录调度事件</span>
</span></span><span class=line><span class=cl>perf sched record -a -- sleep <span class=m>10</span>
</span></span><span class=line><span class=cl>perf sched latency --sort max
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 输出示例：</span>
</span></span><span class=line><span class=cl>Task                  <span class=p>|</span> Runtime ms <span class=p>|</span> Switches <span class=p>|</span> Avg delay ms <span class=p>|</span> Max delay ms <span class=p>|</span>
</span></span><span class=line><span class=cl>----------------------<span class=p>|</span>------------<span class=p>|</span>----------<span class=p>|</span>--------------<span class=p>|</span>--------------<span class=p>|</span>
</span></span><span class=line><span class=cl>node                  <span class=p>|</span>  8234.567  <span class=p>|</span>   <span class=m>3542</span>   <span class=p>|</span>    0.025     <span class=p>|</span>     2.341    <span class=p>|</span>
</span></span><span class=line><span class=cl>kworker/u32:1         <span class=p>|</span>  2156.789  <span class=p>|</span>  <span class=m>15234</span>   <span class=p>|</span>    0.015     <span class=p>|</span>     5.123    <span class=p>|</span>
</span></span></code></pre></div><h3 id=针对监控agent class="relative group">针对监控Agent <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e9%92%88%e5%af%b9%e7%9b%91%e6%8e%a7agent aria-label=Anchor>#</a></span></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 跟踪系统调用</span>
</span></span><span class=line><span class=cl>strace -c -f -p <span class=m>3578</span>  <span class=c1># AliYunDunMonito</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 示例输出：</span>
</span></span><span class=line><span class=cl>% <span class=nb>time</span>     seconds  usecs/call     calls    errors syscall
</span></span><span class=line><span class=cl>------ ----------- ----------- --------- --------- ----------------
</span></span><span class=line><span class=cl> 45.23    0.123456         <span class=m>123</span>      <span class=m>1000</span>           <span class=nb>read</span>
</span></span><span class=line><span class=cl> 32.14    0.087654          <span class=m>87</span>      <span class=m>1000</span>           write
</span></span><span class=line><span class=cl> 12.34    0.033678          <span class=m>33</span>      <span class=m>1000</span>           openat
</span></span><span class=line><span class=cl>  8.90    0.024321          <span class=m>24</span>      <span class=m>1000</span>           close
</span></span><span class=line><span class=cl>...
</span></span></code></pre></div><p><strong>分析：</strong></p><ul><li>高频系统调用会触发内核态切换</li><li>监控Agent如果每秒几千次系统调用，会显著影响性能</li></ul><h3 id=针对应用优化 class="relative group">针对应用优化 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e9%92%88%e5%af%b9%e5%ba%94%e7%94%a8%e4%bc%98%e5%8c%96 aria-label=Anchor>#</a></span></h3><p>即使应用本身健康，仍可进一步优化：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 查看Node.js线程分布</span>
</span></span><span class=line><span class=cl>ps -eLf <span class=p>|</span> grep node
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 查看每个线程的CPU亲和性</span>
</span></span><span class=line><span class=cl>taskset -cp <span class=k>$(</span>pgrep node<span class=k>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 设置CPU亲和性（示例）</span>
</span></span><span class=line><span class=cl>taskset -cp 0-11 <span class=k>$(</span>pgrep node<span class=k>)</span>  <span class=c1># 绑定到CPU 0-11</span>
</span></span></code></pre></div><hr><h2 id=综合分析框架 class="relative group">综合分析框架 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e7%bb%bc%e5%90%88%e5%88%86%e6%9e%90%e6%a1%86%e6%9e%b6 aria-label=Anchor>#</a></span></h2><h3 id=标准分析流程 class="relative group">标准分析流程 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e6%a0%87%e5%87%86%e5%88%86%e6%9e%90%e6%b5%81%e7%a8%8b aria-label=Anchor>#</a></span></h3><pre tabindex=0><code>1. htop/top
   ↓
   发现：Load高、CPU高
   ↓
2. vmstat
   ↓
   判断：CPU密集？I/O密集？内存压力？
   ↓
3. pidstat
   ↓
   定位：哪些进程？什么类型的切换？
   ↓
4. 深入工具
   ↓
   解决：perf、strace、/proc、专项优化
</code></pre><h3 id=关键判断矩阵 class="relative group">关键判断矩阵 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e5%85%b3%e9%94%ae%e5%88%a4%e6%96%ad%e7%9f%a9%e9%98%b5 aria-label=Anchor>#</a></span></h3><table><thead><tr><th>指标组合</th><th>判断</th><th>行动</th></tr></thead><tbody><tr><td>r > 核心数，us高，id低</td><td>CPU过载</td><td>优化代码或扩容</td></tr><tr><td>b高，wa高，bi/bo高</td><td>I/O瓶颈</td><td>优化存储或增加缓存</td></tr><tr><td>si/so >0</td><td>内存不足</td><td>增加内存或优化内存使用</td></tr><tr><td>cs波动大，kworker高</td><td>内核事件处理压力</td><td>检查中断、网络、定时器</td></tr><tr><td>cswch高，nvcswch低</td><td>I/O或锁等待</td><td>优化I/O或减少锁竞争</td></tr><tr><td>cswch低，nvcswch高</td><td>CPU竞争</td><td>增加CPU或优化算法</td></tr></tbody></table><hr><h2 id=本案例的完整结论 class="relative group">本案例的完整结论 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e6%9c%ac%e6%a1%88%e4%be%8b%e7%9a%84%e5%ae%8c%e6%95%b4%e7%bb%93%e8%ae%ba aria-label=Anchor>#</a></span></h2><h3 id=问题定位总结 class="relative group">问题定位总结 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e9%97%ae%e9%a2%98%e5%ae%9a%e4%bd%8d%e6%80%bb%e7%bb%93 aria-label=Anchor>#</a></span></h3><p><strong>原始现象：</strong></p><ul><li>Load Average: 13.08（16核系统）</li><li>CPU使用率：82-83%</li><li>上下文切换：4000-9000次/秒，有波动</li></ul><p><strong>深入分析后的发现：</strong></p><ol><li><p><strong>CPU层面</strong></p><ul><li>✅ 无队列等待（r &lt; 16）</li><li>⚠️ 余量不足（仅17% idle）</li><li>✅ 无I/O瓶颈（wa = 0）</li></ul></li><li><p><strong>进程层面</strong></p><ul><li>✅ Node.js应用健康（自愿切换为主）</li><li>⚠️ 内核工作队列异常活跃（210次/秒）</li><li>❌ 生产环境运行VSCode（不应该）</li><li>⚠️ 监控Agent占用资源（67次/秒）</li></ul></li><li><p><strong>根本原因</strong></p><ul><li>非业务代码占用过多资源</li><li>系统未针对低延迟优化</li><li>缺少容量预留</li></ul></li></ol><h3 id=优化方案 class="relative group">优化方案 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e4%bc%98%e5%8c%96%e6%96%b9%e6%a1%88 aria-label=Anchor>#</a></span></h3><table><thead><tr><th>措施</th><th>预期收益</th><th>难度</th><th>优先级</th></tr></thead><tbody><tr><td>关闭VSCode</td><td>-10~15%负载</td><td>低</td><td>P0</td></tr><tr><td>调查kworker异常</td><td>-5~10%波动</td><td>中</td><td>P1</td></tr><tr><td>优化监控Agent</td><td>-3~5%负载</td><td>低</td><td>P1</td></tr><tr><td>CPU隔离（isolcpus）</td><td>降低抖动</td><td>中</td><td>P2</td></tr><tr><td>IRQ亲和性优化</td><td>降低抖动</td><td>低</td><td>P2</td></tr><tr><td>容量扩展</td><td>增加余量</td><td>高</td><td>P2</td></tr></tbody></table><h3 id=针对hft系统的建议 class="relative group">针对HFT系统的建议 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e9%92%88%e5%af%b9hft%e7%b3%bb%e7%bb%9f%e7%9a%84%e5%bb%ba%e8%ae%ae aria-label=Anchor>#</a></span></h3><p><strong>容量规划：</strong></p><ul><li>平均CPU：50-60%</li><li>峰值CPU：&lt;75%</li><li>Load：&lt;核心数 × 0.7</li></ul><p><strong>系统优化：</strong></p><ul><li>CPU隔离（isolcpus）</li><li>关闭不必要服务</li><li>IRQ亲和性设置</li><li>使用实时内核（PREEMPT_RT）</li></ul><p><strong>监控告警：</strong></p><ul><li>CPU >80%持续1分钟</li><li>Load >核心数×0.8</li><li>上下文切换 >10000/s</li><li>调度延迟 >100μs</li></ul><hr><h2 id=附录常用命令速查 class="relative group">附录：常用命令速查 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e9%99%84%e5%bd%95%e5%b8%b8%e7%94%a8%e5%91%bd%e4%bb%a4%e9%80%9f%e6%9f%a5 aria-label=Anchor>#</a></span></h2><h3 id=系统概览 class="relative group">系统概览 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e7%b3%bb%e7%bb%9f%e6%a6%82%e8%a7%88 aria-label=Anchor>#</a></span></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 实时监控</span>
</span></span><span class=line><span class=cl>htop
</span></span><span class=line><span class=cl>top
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 系统信息</span>
</span></span><span class=line><span class=cl>uptime
</span></span><span class=line><span class=cl>cat /proc/loadavg
</span></span></code></pre></div><h3 id=系统级统计 class="relative group">系统级统计 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e7%b3%bb%e7%bb%9f%e7%ba%a7%e7%bb%9f%e8%ae%a1 aria-label=Anchor>#</a></span></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 综合统计（推荐）</span>
</span></span><span class=line><span class=cl>vmstat <span class=m>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># CPU统计</span>
</span></span><span class=line><span class=cl>mpstat -P ALL <span class=m>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># I/O统计</span>
</span></span><span class=line><span class=cl>iostat -x <span class=m>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 网络统计</span>
</span></span><span class=line><span class=cl>sar -n DEV <span class=m>1</span>
</span></span></code></pre></div><h3 id=进程级统计 class="relative group">进程级统计 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e8%bf%9b%e7%a8%8b%e7%ba%a7%e7%bb%9f%e8%ae%a1 aria-label=Anchor>#</a></span></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 上下文切换</span>
</span></span><span class=line><span class=cl>pidstat -w <span class=m>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># CPU使用</span>
</span></span><span class=line><span class=cl>pidstat -u <span class=m>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># I/O统计</span>
</span></span><span class=line><span class=cl>pidstat -d <span class=m>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 线程级</span>
</span></span><span class=line><span class=cl>pidstat -t <span class=m>1</span>
</span></span></code></pre></div><h3 id=深入分析 class="relative group">深入分析 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e6%b7%b1%e5%85%a5%e5%88%86%e6%9e%90 aria-label=Anchor>#</a></span></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 性能采样</span>
</span></span><span class=line><span class=cl>perf top
</span></span><span class=line><span class=cl>perf record -a -g -- sleep <span class=m>10</span>
</span></span><span class=line><span class=cl>perf report
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 系统调用跟踪</span>
</span></span><span class=line><span class=cl>strace -c -f -p &lt;PID&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 调度延迟</span>
</span></span><span class=line><span class=cl>perf sched record -a -- sleep <span class=m>10</span>
</span></span><span class=line><span class=cl>perf sched latency
</span></span></code></pre></div><h3 id=内核信息 class="relative group">内核信息 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e5%86%85%e6%a0%b8%e4%bf%a1%e6%81%af aria-label=Anchor>#</a></span></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 中断统计</span>
</span></span><span class=line><span class=cl>cat /proc/interrupts
</span></span><span class=line><span class=cl>watch -n <span class=m>1</span> <span class=s1>&#39;cat /proc/interrupts | head -20&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 软中断</span>
</span></span><span class=line><span class=cl>cat /proc/softirqs
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 调度信息</span>
</span></span><span class=line><span class=cl>cat /proc/sched_debug
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># CPU频率和温度</span>
</span></span><span class=line><span class=cl>grep MHz /proc/cpuinfo
</span></span><span class=line><span class=cl>cat /sys/class/thermal/thermal_zone*/temp
</span></span></code></pre></div><hr><h2 id=总结 class="relative group">总结 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e6%80%bb%e7%bb%93 aria-label=Anchor>#</a></span></h2><p>Linux系统负载分析是一个<strong>从宏观到微观、从现象到本质</strong>的过程：</p><ol><li><strong>htop</strong>：快速概览，发现异常</li><li><strong>vmstat</strong>：系统级统计，判断瓶颈类型</li><li><strong>pidstat</strong>：进程级分析，定位具体进程</li><li><strong>深入工具</strong>：找到根本原因</li></ol><p>关键在于：</p><ul><li><strong>理解指标含义</strong>：不要被表面数字误导</li><li><strong>结合多个工具</strong>：单一工具无法给出完整答案</li><li><strong>建立基线</strong>：了解系统正常状态才能识别异常</li><li><strong>持续监控</strong>：性能问题往往是演变过程</li></ul><p>对于关键业务系统（如HFT），性能分析不仅是解决问题的手段，更是<strong>风险管理</strong>的重要组成部分。</p><hr><p><strong>作者注：</strong> 本文所有案例来自真实生产环境，数据略有脱敏处理。建议在测试环境充分实践后再应用于生产系统。</p></div></section><footer class="max-w-4xl pt-8 print:hidden"><div class=flex><picture class="!mb-0 !mt-0 me-4 w-24 h-auto rounded-full"><img width=360 height=360 class="!mb-0 !mt-0 me-4 w-24 h-auto rounded-full" alt="Wenjun Yu" loading=lazy decoding=async src=/img/author.jpg></picture><div class=place-self-center><div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">Author</div><div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">Wenjun Yu</div><div class="text-sm text-neutral-700 dark:text-neutral-400">A little bit about you</div><div class="text-2xl sm:text-lg"><div class="flex flex-wrap text-neutral-400 dark:text-neutral-500"><a class="px-1 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400" style=will-change:transform href=https://github.com/code-agree target=_blank aria-label=Github rel="me noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></a><a class="px-1 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400" style=will-change:transform href=https://x.com/flight_from_ target=_blank aria-label=X-Twitter rel="me noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"/></svg></span></a><a class="px-1 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400" style=will-change:transform href=mailto:lineyua66@gmail.com target=_blank aria-label=Email rel="me noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M207.8 20.73c-93.45 18.32-168.7 93.66-187 187.1-27.64 140.9 68.65 266.2 199.1 285.1 19.01 2.888 36.17-12.26 36.17-31.49l1e-4-.6631c0-15.74-11.44-28.88-26.84-31.24-84.35-12.98-149.2-86.13-149.2-174.2.0-102.9 88.61-185.5 193.4-175.4 91.54 8.869 158.6 91.25 158.6 183.2v16.16c0 22.09-17.94 40.05-40 40.05s-40.01-17.96-40.01-40.05v-120.1c0-8.847-7.161-16.02-16.01-16.02l-31.98.0036c-7.299.0-13.2 4.992-15.12 11.68-24.85-12.15-54.24-16.38-86.06-5.106-38.75 13.73-68.12 48.91-73.72 89.64-9.483 69.01 43.81 128 110.9 128 26.44.0 50.43-9.544 69.59-24.88 24 31.3 65.23 48.69 109.4 37.49C465.2 369.3 496 324.1 495.1 277.2V256.3c0-149.2-133.9-265.632-287.3-235.57zM239.1 304.3c-26.47.0-48-21.56-48-48.05s21.53-48.05 48-48.05 48 21.56 48 48.05-20.6 48.05-48 48.05z"/></svg></span></a></div></div></div></div><section class="flex flex-row flex-wrap justify-center pt-4 text-xl"><a class="m-1 inline-block min-w-[2.4rem] rounded bg-neutral-300 p-1 text-center text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://www.facebook.com/sharer/sharer.php?u=https://code-agree.github.io/blog/2025-12-04-cpu_debug/&amp;quote=Linux%e7%b3%bb%e7%bb%9f%e8%b4%9f%e8%bd%bd%e5%ae%9a%e4%bd%8d%e4%b8%8e%e5%88%86%e6%9e%90%e5%ae%9e%e6%88%98%e6%8c%87%e5%8d%97" title="Share on Facebook" aria-label="Share on Facebook" target=_blank rel="noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14.0 55.52 4.84 55.52 4.84v61h-31.28c-30.8.0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"/></svg></span></a><a class="m-1 inline-block min-w-[2.4rem] rounded bg-neutral-300 p-1 text-center text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://x.com/intent/tweet/?url=https://code-agree.github.io/blog/2025-12-04-cpu_debug/&amp;text=Linux%e7%b3%bb%e7%bb%9f%e8%b4%9f%e8%bd%bd%e5%ae%9a%e4%bd%8d%e4%b8%8e%e5%88%86%e6%9e%90%e5%ae%9e%e6%88%98%e6%8c%87%e5%8d%97" title="Post on X" aria-label="Post on X" target=_blank rel="noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"/></svg></span></a><a class="m-1 inline-block min-w-[2.4rem] rounded bg-neutral-300 p-1 text-center text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://tootpick.org/#text=https://code-agree.github.io/blog/2025-12-04-cpu_debug/%20Linux%e7%b3%bb%e7%bb%9f%e8%b4%9f%e8%bd%bd%e5%ae%9a%e4%bd%8d%e4%b8%8e%e5%88%86%e6%9e%90%e5%ae%9e%e6%88%98%e6%8c%87%e5%8d%97" title="Toot on Mastodon" aria-label="Toot on Mastodon" target=_blank rel="noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M433 179.11c0-97.2-63.71-125.7-63.71-125.7-62.52-28.7-228.56-28.4-290.48.0.0.0-63.72 28.5-63.72 125.7.0 115.7-6.6 259.4 105.63 289.1 40.51 10.7 75.32 13 103.33 11.4 50.81-2.8 79.32-18.1 79.32-18.1l-1.7-36.9s-36.31 11.4-77.12 10.1c-40.41-1.4-83-4.4-89.63-54a102.54 102.54.0 01-.9-13.9c85.63 20.9 158.65 9.1 178.75 6.7 56.12-6.7 105-41.3 111.23-72.9 9.8-49.8 9-121.5 9-121.5zm-75.12 125.2h-46.63v-114.2c0-49.7-64-51.6-64 6.9v62.5h-46.33V197c0-58.5-64-56.6-64-6.9v114.2H90.19c0-122.1-5.2-147.9 18.41-175 25.9-28.9 79.82-30.8 103.83 6.1l11.6 19.5 11.6-19.5c24.11-37.1 78.12-34.8 103.83-6.1 23.71 27.3 18.4 53 18.4 175z"/></svg></span></a><a class="m-1 inline-block min-w-[2.4rem] rounded bg-neutral-300 p-1 text-center text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://pinterest.com/pin/create/bookmarklet/?url=https://code-agree.github.io/blog/2025-12-04-cpu_debug/&amp;description=Linux%e7%b3%bb%e7%bb%9f%e8%b4%9f%e8%bd%bd%e5%ae%9a%e4%bd%8d%e4%b8%8e%e5%88%86%e6%9e%90%e5%ae%9e%e6%88%98%e6%8c%87%e5%8d%97" title="Pin on Pinterest" aria-label="Pin on Pinterest" target=_blank rel="noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentcolor" d="M496 256c0 137-111 248-248 248-25.6.0-50.2-3.9-73.4-11.1 10.1-16.5 25.2-43.5 30.8-65 3-11.6 15.4-59 15.4-59 8.1 15.4 31.7 28.5 56.8 28.5 74.8.0 128.7-68.8 128.7-154.3.0-81.9-66.9-143.2-152.9-143.2-107 0-163.9 71.8-163.9 150.1.0 36.4 19.4 81.7 50.3 96.1 4.7 2.2 7.2 1.2 8.3-3.3.8-3.4 5-20.3 6.9-28.1.6-2.5.3-4.7-1.7-7.1-10.1-12.5-18.3-35.3-18.3-56.6.0-54.7 41.4-107.6 112-107.6 60.9.0 103.6 41.5 103.6 100.9.0 67.1-33.9 113.6-78 113.6-24.3.0-42.6-20.1-36.7-44.8 7-29.5 20.5-61.3 20.5-82.6.0-19-10.2-34.9-31.4-34.9-24.9.0-44.9 25.7-44.9 60.2.0 22 7.4 36.8 7.4 36.8s-24.5 103.8-29 123.2c-5 21.4-3 51.6-.9 71.2C65.4 450.9.0 361.1.0 256 0 119 111 8 248 8s248 111 248 248z"/></svg></span></a><a class="m-1 inline-block min-w-[2.4rem] rounded bg-neutral-300 p-1 text-center text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://reddit.com/submit/?url=https://code-agree.github.io/blog/2025-12-04-cpu_debug/&amp;resubmit=true&amp;title=Linux%e7%b3%bb%e7%bb%9f%e8%b4%9f%e8%bd%bd%e5%ae%9a%e4%bd%8d%e4%b8%8e%e5%88%86%e6%9e%90%e5%ae%9e%e6%88%98%e6%8c%87%e5%8d%97" title="Submit to Reddit" aria-label="Submit to Reddit" target=_blank rel="noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M201.5 305.5c-13.8.0-24.9-11.1-24.9-24.6.0-13.8 11.1-24.9 24.9-24.9 13.6.0 24.6 11.1 24.6 24.9.0 13.6-11.1 24.6-24.6 24.6zM504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zm-132.3-41.2c-9.4.0-17.7 3.9-23.8 10-22.4-15.5-52.6-25.5-86.1-26.6l17.4-78.3 55.4 12.5c0 13.6 11.1 24.6 24.6 24.6 13.8.0 24.9-11.3 24.9-24.9s-11.1-24.9-24.9-24.9c-9.7.0-18 5.8-22.1 13.8l-61.2-13.6c-3-.8-6.1 1.4-6.9 4.4l-19.1 86.4c-33.2 1.4-63.1 11.3-85.5 26.8-6.1-6.4-14.7-10.2-24.1-10.2-34.9.0-46.3 46.9-14.4 62.8-1.1 5-1.7 10.2-1.7 15.5.0 52.6 59.2 95.2 132 95.2 73.1.0 132.3-42.6 132.3-95.2.0-5.3-.6-10.8-1.9-15.8 31.3-16 19.8-62.5-14.9-62.5zM302.8 331c-18.2 18.2-76.1 17.9-93.6.0-2.2-2.2-6.1-2.2-8.3.0-2.5 2.5-2.5 6.4.0 8.6 22.8 22.8 87.3 22.8 110.2.0 2.5-2.2 2.5-6.1.0-8.6-2.2-2.2-6.1-2.2-8.3.0zm7.7-75c-13.6.0-24.6 11.1-24.6 24.9.0 13.6 11.1 24.6 24.6 24.6 13.8.0 24.9-11.1 24.9-24.6.0-13.8-11-24.9-24.9-24.9z"/></svg></span></a><a class="m-1 inline-block min-w-[2.4rem] rounded bg-neutral-300 p-1 text-center text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://code-agree.github.io/blog/2025-12-04-cpu_debug/&amp;title=Linux%e7%b3%bb%e7%bb%9f%e8%b4%9f%e8%bd%bd%e5%ae%9a%e4%bd%8d%e4%b8%8e%e5%88%86%e6%9e%90%e5%ae%9e%e6%88%98%e6%8c%87%e5%8d%97" title="Share on LinkedIn" aria-label="Share on LinkedIn" target=_blank rel="noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M416 32H31.9C14.3 32 0 46.5.0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6.0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3.0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2.0 38.5 17.3 38.5 38.5.0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6.0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2.0 79.7 44.3 79.7 101.9V416z"/></svg></span></a><a class="m-1 inline-block min-w-[2.4rem] rounded bg-neutral-300 p-1 text-center text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="mailto:?body=https://code-agree.github.io/blog/2025-12-04-cpu_debug/&amp;subject=Linux%e7%b3%bb%e7%bb%9f%e8%b4%9f%e8%bd%bd%e5%ae%9a%e4%bd%8d%e4%b8%8e%e5%88%86%e6%9e%90%e5%ae%9e%e6%88%98%e6%8c%87%e5%8d%97" title="Send via email" aria-label="Send via email" target=_blank rel="noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M207.8 20.73c-93.45 18.32-168.7 93.66-187 187.1-27.64 140.9 68.65 266.2 199.1 285.1 19.01 2.888 36.17-12.26 36.17-31.49l1e-4-.6631c0-15.74-11.44-28.88-26.84-31.24-84.35-12.98-149.2-86.13-149.2-174.2.0-102.9 88.61-185.5 193.4-175.4 91.54 8.869 158.6 91.25 158.6 183.2v16.16c0 22.09-17.94 40.05-40 40.05s-40.01-17.96-40.01-40.05v-120.1c0-8.847-7.161-16.02-16.01-16.02l-31.98.0036c-7.299.0-13.2 4.992-15.12 11.68-24.85-12.15-54.24-16.38-86.06-5.106-38.75 13.73-68.12 48.91-73.72 89.64-9.483 69.01 43.81 128 110.9 128 26.44.0 50.43-9.544 69.59-24.88 24 31.3 65.23 48.69 109.4 37.49C465.2 369.3 496 324.1 495.1 277.2V256.3c0-149.2-133.9-265.632-287.3-235.57zM239.1 304.3c-26.47.0-48-21.56-48-48.05s21.53-48.05 48-48.05 48 21.56 48 48.05-20.6 48.05-48 48.05z"/></svg></span></a><a class="m-1 inline-block min-w-[2.4rem] rounded bg-neutral-300 p-1 text-center text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://telegram.me/share/url?text=https://code-agree.github.io/blog/2025-12-04-cpu_debug/&amp;url=Linux%e7%b3%bb%e7%bb%9f%e8%b4%9f%e8%bd%bd%e5%ae%9a%e4%bd%8d%e4%b8%8e%e5%88%86%e6%9e%90%e5%ae%9e%e6%88%98%e6%8c%87%e5%8d%97" title="Share on Telegram" aria-label="Share on Telegram" target=_blank rel="noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentcolor" d="M248 8C111.033 8 0 119.033.0 256S111.033 504 248 504 496 392.967 496 256 384.967 8 248 8zM362.952 176.66c-3.732 39.215-19.881 134.378-28.1 178.3-3.476 18.584-10.322 24.816-16.948 25.425-14.4 1.326-25.338-9.517-39.287-18.661-21.827-14.308-34.158-23.215-55.346-37.177-24.485-16.135-8.612-25 5.342-39.5 3.652-3.793 67.107-61.51 68.335-66.746.153-.655.3-3.1-1.154-4.384s-3.59-.849-5.135-.5q-3.283.746-104.608 69.142-14.845 10.194-26.894 9.934c-8.855-.191-25.888-5.006-38.551-9.123-15.531-5.048-27.875-7.717-26.8-16.291q.84-6.7 18.45-13.7 108.446-47.248 144.628-62.3c68.872-28.647 83.183-33.623 92.511-33.789 2.052-.034 6.639.474 9.61 2.885a10.452 10.452.0 013.53 6.716A43.765 43.765.0 01362.952 176.66z"/></svg></span></a><a class="m-1 inline-block min-w-[2.4rem] rounded bg-neutral-300 p-1 text-center text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://line.me/R/share?text=https://code-agree.github.io/blog/2025-12-04-cpu_debug/Linux%e7%b3%bb%e7%bb%9f%e8%b4%9f%e8%bd%bd%e5%ae%9a%e4%bd%8d%e4%b8%8e%e5%88%86%e6%9e%90%e5%ae%9e%e6%88%98%e6%8c%87%e5%8d%97" title="Share on LINE" aria-label="Share on LINE" target=_blank rel="noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M311 196.8v81.3c0 2.1-1.6 3.7-3.7 3.7h-13c-1.3.0-2.4-.7-3-1.5L254 230v48.2c0 2.1-1.6 3.7-3.7 3.7h-13c-2.1.0-3.7-1.6-3.7-3.7V196.9c0-2.1 1.6-3.7 3.7-3.7h12.9c1.1.0 2.4.6 3 1.6l37.3 50.3V196.9c0-2.1 1.6-3.7 3.7-3.7h13c2.1-.1 3.8 1.6 3.8 3.5zm-93.7-3.7h-13c-2.1.0-3.7 1.6-3.7 3.7v81.3c0 2.1 1.6 3.7 3.7 3.7h13c2.1.0 3.7-1.6 3.7-3.7V196.8c0-1.9-1.6-3.7-3.7-3.7zm-31.4 68.1H150.3V196.8c0-2.1-1.6-3.7-3.7-3.7h-13c-2.1.0-3.7 1.6-3.7 3.7v81.3c0 1 .3 1.8 1 2.5.7.6 1.5 1 2.5 1h52.2c2.1.0 3.7-1.6 3.7-3.7v-13c0-1.9-1.6-3.7-3.5-3.7zm193.7-68.1H327.3c-1.9.0-3.7 1.6-3.7 3.7v81.3c0 1.9 1.6 3.7 3.7 3.7h52.2c2.1.0 3.7-1.6 3.7-3.7V265c0-2.1-1.6-3.7-3.7-3.7H344V247.7h35.5c2.1.0 3.7-1.6 3.7-3.7V230.9c0-2.1-1.6-3.7-3.7-3.7H344V213.5h35.5c2.1.0 3.7-1.6 3.7-3.7v-13c-.1-1.9-1.7-3.7-3.7-3.7zM512 93.4v326c-.1 51.2-42.1 92.7-93.4 92.6H92.6C41.4 511.9-.1 469.8.0 418.6V92.6C.1 41.4 42.2-.1 93.4.0h326c51.2.1 92.7 42.1 92.6 93.4zM441.6 233.5c0-83.4-83.7-151.3-186.4-151.3S68.8 150.1 68.8 233.5c0 74.7 66.3 137.4 155.9 149.3 21.8 4.7 19.3 12.7 14.4 42.1-.8 4.7-3.8 18.4 16.1 10.1s107.3-63.2 146.5-108.2c27-29.7 39.9-59.8 39.9-93.1z"/></svg></span></a><a class="m-1 inline-block min-w-[2.4rem] rounded bg-neutral-300 p-1 text-center text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://service.weibo.com/share/share.php?url=https://code-agree.github.io/blog/2025-12-04-cpu_debug/&amp;appkey=&amp;title=Linux%e7%b3%bb%e7%bb%9f%e8%b4%9f%e8%bd%bd%e5%ae%9a%e4%bd%8d%e4%b8%8e%e5%88%86%e6%9e%90%e5%ae%9e%e6%88%98%e6%8c%87%e5%8d%97&amp;pic=&amp;ralateUid=&amp;lang" title="Share on Weibo" aria-label="Share on Weibo" target=_blank rel="noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg xmlns="http://www.w3.org/2000/svg" height="16" width="16" viewBox="0 0 512 512"><path fill="currentcolor" d="M407 177.6c7.6-24-13.4-46.8-37.4-41.7-22 4.8-28.8-28.1-7.1-32.8 50.1-10.9 92.3 37.1 76.5 84.8-6.8 21.2-38.8 10.8-32-10.3zM214.8 446.7C108.5 446.7.0 395.3.0 310.4c0-44.3 28-95.4 76.3-143.7C176 67 279.5 65.8 249.9 161c-4 13.1 12.3 5.7 12.3 6 79.5-33.6 140.5-16.8 114 51.4-3.7 9.4 1.1 10.9 8.3 13.1 135.7 42.3 34.8 215.2-169.7 215.2zm143.7-146.3c-5.4-55.7-78.5-94-163.4-85.7-84.8 8.6-148.8 60.3-143.4 116s78.5 94 163.4 85.7c84.8-8.6 148.8-60.3 143.4-116zM347.9 35.1c-25.9 5.6-16.8 43.7 8.3 38.3 72.3-15.2 134.8 52.8 111.7 124-7.4 24.2 29.1 37 37.4 12 31.9-99.8-55.1-195.9-157.4-174.3zm-78.5 311c-17.1 38.8-66.8 60-109.1 46.3-40.8-13.1-58-53.4-40.3-89.7 17.7-35.4 63.1-55.4 103.4-45.1 42 10.8 63.1 50.2 46 88.5zm-86.3-30c-12.9-5.4-30 .3-38 12.9-8.3 12.9-4.3 28 8.6 34 13.1 6 30.8.3 39.1-12.9 8-13.1 3.7-28.3-9.7-34zm32.6-13.4c-5.1-1.7-11.4.6-14.3 5.4-2.9 5.1-1.4 10.6 3.7 12.9 5.1 2 11.7-.3 14.6-5.4 2.8-5.2 1.1-10.9-4-12.9z"/></svg></span></a></section><div class=pt-8><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class="flex justify-between pt-3"><span><a class="group flex" href=/blog/2025-11-08-default/><span class="me-2 text-neutral-700 transition-transform group-hover:-translate-x-[2px] group-hover:text-primary-600 dark:text-neutral dark:group-hover:text-primary-400"><span class="ltr:inline rtl:hidden">&larr;</span><span class="ltr:hidden rtl:inline">&rarr;</span></span>
<span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">SPSC DTO 构造语义优化复盘</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime="2025-11-08 00:47:42 +0800 +0800">8 November 2025</time>
</span></span></a></span><span><a class="group flex text-right" href=/blog/2025-12-24-flat_hash_map/><span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">std::map vs absl::flat_hash_map 性能比较分析</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime="2025-12-24 17:13:38 +0800 +0800">24 December 2025</time>
</span></span><span class="ms-2 text-neutral-700 transition-transform group-hover:-translate-x-[2px] group-hover:text-primary-600 dark:text-neutral dark:group-hover:text-primary-400"><span class="ltr:inline rtl:hidden">&rarr;</span><span class="ltr:hidden rtl:inline">&larr;</span></span></a></span></div></div><div class=pt-3><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class=pt-3><script src=https://giscus.app/client.js data-repo=code-agree/code-agree.github.io data-repo-id=R_kgDOK-ejEw data-category=Announcements data-category-id=DIC_kwDOK-ejE84ChYPz data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=preferred_color_scheme data-lang=zh-CN data-loading=lazy crossorigin=anonymous async></script></div></div></footer></article><div class="pointer-events-none absolute bottom-0 end-0 top-[100vh] w-12"><a href=#the-top class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 backdrop-blur hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400" aria-label="Scroll to top" title="Scroll to top">&uarr;</a></div></main><footer class="py-10 print:hidden"><div class="flex items-center justify-between"><div><p class="text-sm text-neutral-500 dark:text-neutral-400">&copy;
2025
Wenjun Yu</p><p class="text-xs text-neutral-500 dark:text-neutral-400">Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://gohugo.io/ target=_blank rel="noopener noreferrer">Hugo</a> & <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://github.com/jpanther/congo target=_blank rel="noopener noreferrer">Congo</a></p></div><div class="flex flex-row items-center"></div></div></footer><div id=search-wrapper class="invisible fixed inset-0 z-50 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm sm:p-6 md:p-[10vh] lg:p-[12vh] dark:bg-neutral-900/50" data-url=https://code-agree.github.io/><div id=search-modal class="top-20 mx-auto flex min-h-0 w-full max-w-3xl flex-col rounded-md border border-neutral-200 bg-neutral shadow-lg dark:border-neutral-700 dark:bg-neutral-800"><header class="relative z-10 flex flex-none items-center justify-between px-2"><form class="flex min-w-0 flex-auto items-center"><div class="flex h-8 w-8 items-center justify-center text-neutral-400"><span class="icon relative inline-block px-1 align-text-bottom"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></div><input type=search id=search-query class="mx-1 flex h-12 flex-auto appearance-none bg-transparent focus:outline-dotted focus:outline-2 focus:outline-transparent" placeholder=Search tabindex=0></form><button id=close-search-button class="flex h-8 w-8 items-center justify-center text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" title="Close (Esc)">
<span class="icon relative inline-block px-1 align-text-bottom"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></button></header><section class="flex-auto overflow-auto px-2"><ul id=search-results></ul></section></div></div></div></body></html>